# {{ ansible_managed }}

# creating a separate table for BIRD to store BGP routes
table inet1;

# the following is a template. The template needs to be applied to individual neighbors.

template bgp PEERS {
  debug all;                                           # debug BGP
  description "{{ bird_friendly_name }}";              # Description of PEERS
  local as {{ bird_local_asn }};                       # the AS used by the local BGP speaker
  multihop;                                            # was not default in 1.3.11
  import all;                                          # just accept everything
  export all;                                          # and advertise it to all the neigbors
  import limit 10000;                                   # Route limits
  rs client;                                           # Route Server client
  source address {{ ansible_default_ipv4['address'] }};# Source BGP from this IP address
  graceful restart;
}