# {{ ansible_managed }}

filter default_gw_filter 
{
  if net = 0.0.0.0/0 then reject;
}

filter bgp_import_ipv4 
{
if net_martians_v4() then return false;
if avoid_crappy_prefixes() then return false;
}

filter bgp_import_ipv6 
{
  if net_martians_v6() then return false;
  if avoid_crappy_prefixes() then return false;
}

filter bgp_export_ipv4 
{
  if is_valid_network() then accept;
  else reject;
}

filter bgp_export_ipv6 
{
  if is_valid_network_v6() then accept;
  else reject;
}

filter kernel_export_ipv4 
{
  if source = RTS_STATIC then reject;
  krt_prefsrc = {{ ansible_default_ipv4['address'] }};
  accept;
}

filter kernel_export_ipv6 
{
  if source = RTS_STATIC then reject;
  krt_prefsrc = {{ ansible_default_ipv6['address'] }};
  accept;
}